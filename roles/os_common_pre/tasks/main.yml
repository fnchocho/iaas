
# This script is meant to run after boostrap.yml initial configuration run

- name: update all hosts
  package:
    update_cache: yes
  # changed_when: false          # Allow control over what is considered as change
  ignore_errors: true

- name: Install base packages
  package:
    name:
      - unzip
      - dnf

- name: Create ansible home directory
  file:
    path: /ansible
    state: directory
    mode: '0755'

- name: Create a welcome file in ansible directory
  file:
    path: /ansible/welcome.txt
    state: touch
    mode: u=rwx,g=rw,o=rw

- name: Write content in welcome.txt file
  copy:
    src: welcome.txt
    dest: /ansible/welcome.txt
    owner: root
    mode: '0644'
  register: display_file_content

# Gather useful server variables
- name: Gather server facts
  setup:
    filter:
      - ansible_distribution
      - ansible_machine_id
      - ansible_default_ipv4
      - ansible_*_mb
  register: host_facts
 

- name: Display server facts
  debug:
    var: host_facts

# Display some facts about each server
- name: Collect facts about server
  set_fact:
    one: 'Hello, you are running'
    two: "{{ ansible_distribution }}"
    three: "{{ ansible_distribution_version }}"
    four: "{{ ansible_default_ipv4 }}"

- name: Display facts about server
  debug:
    msg: "{{ one }}-{{ two }}-{{ three }}--{{four}}"

